<%
  let lang = `en`;
  let title = `404 — Lost in the Void`;
  let code = 404;
  let label = `NOT FOUND`;
  let messages = [
    `The page you're looking for doesn't exist.`,
    `Maybe it was moved, deleted, or never existed.`,
    `Whatever happened — it's gone now.`
  ];
%>
<!DOCTYPE html>
<html lang="<%- lang -%>">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="fxhxyz" />
    <link type="image/x-icon" rel="shortcut icon" href="./public/images/favicon.ico" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="address=no" />
    <meta name="darkreader" content="NO-DARKREADER-PLUGIN" />
    <meta name="robots" content="noindex, nofollow" />
    <link href="https://unpkg.com/modern-normalize@2.0.0/modern-normalize.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Bebas+Neue&display=swap" rel="stylesheet" />
    <title><%- title -%></title>
    <style>
      :root {
        --bg: #080808;
        --fg: #f0ece4;
        --accent: #e8ff00;
        --dim: #2a2a2a;
        --red: #ff2d55;
        --mono: 'Space Mono', monospace;
        --display: 'Bebas Neue', sans-serif;
      }

      *, *::before, *::after { box-sizing: border-box; }

      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        background: var(--bg);
        color: var(--fg);
        font-family: var(--mono);
        overflow: hidden;
        cursor: crosshair;
      }

      /* Scanline overlay */
      body::before {
        content: '';
        position: fixed;
        inset: 0;
        background: repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(0,0,0,0.08) 2px,
          rgba(0,0,0,0.08) 4px
        );
        pointer-events: none;
        z-index: 100;
      }

      /* Noise grain */
      body::after {
        content: '';
        position: fixed;
        inset: -50%;
        width: 200%;
        height: 200%;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
        pointer-events: none;
        z-index: 99;
        opacity: 0.4;
        animation: grain 0.8s steps(1) infinite;
      }

      @keyframes grain {
        0%, 100% { transform: translate(0, 0); }
        10% { transform: translate(-2%, -3%); }
        20% { transform: translate(3%, 2%); }
        30% { transform: translate(-1%, 4%); }
        40% { transform: translate(4%, -1%); }
        50% { transform: translate(-3%, 2%); }
        60% { transform: translate(2%, -4%); }
        70% { transform: translate(-4%, 1%); }
        80% { transform: translate(1%, 3%); }
        90% { transform: translate(3%, -2%); }
      }

      .scene {
        position: relative;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        padding: 0 8vw;
        gap: 0;
      }

      /* Grid lines background */
      .scene__grid {
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(var(--dim) 1px, transparent 1px),
          linear-gradient(90deg, var(--dim) 1px, transparent 1px);
        background-size: 60px 60px;
        opacity: 0.3;
        animation: gridFade 4s ease-in-out infinite alternate;
      }

      @keyframes gridFade {
        from { opacity: 0.15; }
        to { opacity: 0.35; }
      }

      .label {
        font-family: var(--mono);
        font-size: clamp(10px, 1.2vw, 14px);
        letter-spacing: 0.4em;
        color: var(--accent);
        text-transform: uppercase;
        margin-bottom: 1.5rem;
        animation: fadeUp 0.6s ease both;
        position: relative;
        z-index: 10;
      }

      .label::before {
        content: '// ';
        color: var(--dim);
      }

      .code-wrap {
        position: relative;
        z-index: 10;
        line-height: 1;
        margin-bottom: 2rem;
      }

      .code {
        font-family: var(--display);
        font-size: clamp(120px, 22vw, 280px);
        line-height: 0.9;
        color: var(--fg);
        letter-spacing: -0.02em;
        position: relative;
        display: inline-block;
        animation: fadeUp 0.6s ease 0.1s both;
      }

      /* Glitch layers */
      .code::before,
      .code::after {
        content: '<%- code %>';
        position: absolute;
        inset: 0;
        font-family: var(--display);
        font-size: inherit;
        line-height: inherit;
      }

      .code::before {
        color: var(--red);
        animation: glitch1 3.5s infinite;
        clip-path: polygon(0 20%, 100% 20%, 100% 40%, 0 40%);
      }

      .code::after {
        color: var(--accent);
        animation: glitch2 3.5s infinite;
        clip-path: polygon(0 60%, 100% 60%, 100% 80%, 0 80%);
      }

      @keyframes glitch1 {
        0%, 92%, 100% { transform: translate(0); opacity: 0; }
        93% { transform: translate(-4px, 2px); opacity: 1; }
        94% { transform: translate(4px, -2px); opacity: 1; }
        95% { transform: translate(0); opacity: 0; }
        97% { transform: translate(-6px, 1px); opacity: 1; }
        98% { transform: translate(0); opacity: 0; }
      }

      @keyframes glitch2 {
        0%, 94%, 100% { transform: translate(0); opacity: 0; }
        95% { transform: translate(5px, -1px); opacity: 1; }
        96% { transform: translate(-3px, 2px); opacity: 1; }
        97% { transform: translate(0); opacity: 0; }
      }

      .messages {
        position: relative;
        z-index: 10;
        margin-bottom: 3rem;
        animation: fadeUp 0.6s ease 0.2s both;
      }

      <% messages.forEach(function(msg, i) { %>
      .messages__line--<%= i %> {
        animation-delay: <%= 0.3 + i * 0.08 %>s;
      }
      <% }) %>

      .messages__line {
        font-size: clamp(11px, 1.3vw, 15px);
        color: rgba(240,236,228,0.45);
        line-height: 2;
        letter-spacing: 0.02em;
        animation: fadeUp 0.5s ease both;
      }

      .messages__line::before {
        content: '> ';
        color: var(--dim);
      }

      .actions {
        position: relative;
        z-index: 10;
        display: flex;
        gap: 1.5rem;
        align-items: center;
        animation: fadeUp 0.6s ease 0.5s both;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-family: var(--mono);
        font-size: 12px;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        text-decoration: none;
        padding: 0.9rem 2rem;
        border: 1px solid var(--fg);
        color: var(--bg);
        background: var(--fg);
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: '';
        position: absolute;
        inset: 0;
        background: var(--accent);
        transform: translateX(-101%);
        transition: transform 0.25s ease;
        z-index: -1;
      }

      .btn:hover {
        color: var(--bg);
        border-color: var(--accent);
      }

      .btn:hover::before {
        transform: translateX(0);
      }

      .btn--ghost {
        background: transparent;
        color: var(--fg);
        border-color: var(--dim);
      }

      .btn--ghost:hover {
        color: var(--bg);
      }

      /* Corner decorations */
      .corner {
        position: fixed;
        width: 40px;
        height: 40px;
        z-index: 10;
      }

      .corner::before, .corner::after {
        content: '';
        position: absolute;
        background: var(--accent);
      }

      .corner::before { width: 100%; height: 1px; top: 0; left: 0; }
      .corner::after  { width: 1px; height: 100%; top: 0; left: 0; }

      .corner--tl { top: 2rem; left: 2rem; }
      .corner--tr { top: 2rem; right: 2rem; transform: scaleX(-1); }
      .corner--bl { bottom: 2rem; left: 2rem; transform: scaleY(-1); }
      .corner--br { bottom: 2rem; right: 2rem; transform: scale(-1); }

      /* Status bar */
      .statusbar {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        font-size: 10px;
        letter-spacing: 0.3em;
        color: var(--dim);
        text-transform: uppercase;
        z-index: 10;
        white-space: nowrap;
      }

      .statusbar__dot {
        display: inline-block;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--red);
        margin-right: 0.5rem;
        animation: blink 1.2s ease infinite;
        vertical-align: middle;
      }

      @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.1; }
      }

      @keyframes fadeUp {
        from { opacity: 0; transform: translateY(16px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>
  </head>
  <body>
    <div class="scene__grid"></div>

    <div class="corner corner--tl"></div>
    <div class="corner corner--tr"></div>
    <div class="corner corner--bl"></div>
    <div class="corner corner--br"></div>

    <div class="scene">
      <span class="label"><%- label %></span>

      <div class="code-wrap">
        <span class="code"><%- code %></span>
      </div>

      <div class="messages">
        <% messages.forEach(function(msg, i) { %>
          <p class="messages__line messages__line--<%= i %>"><%= msg %></p>
        <% }) %>
      </div>

      <div class="actions">
        <a href="/" class="btn">← Go home</a>
        <a href="javascript:history.back()" class="btn btn--ghost">Go back</a>
      </div>
    </div>

    <div class="statusbar">
      <span class="statusbar__dot"></span>
      ERR_<%- code %>_PAGE_NOT_FOUND &nbsp;·&nbsp; <%- new Date().toISOString().split('T')[0] %>
    </div>
  </body>
</html>
