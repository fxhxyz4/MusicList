!function(){"use strict";var e={formEl:document.querySelector(".nav-form__post"),inputEl:document.querySelector(".nav-form__input"),loginBtn:document.querySelector(".nav-auth__link"),listEl:document.querySelector(".main__list")};const t=JSON.parse('{"a":["After Dark","Freaks","love"]}').a,a=btoa("74e32fcef00f4917950e482de83f327d:7d7aece049984959b34744653fcb3d1b");let n=1;console.clear(),e.formEl.addEventListener("submit",(o=>{o.preventDefault();const l=e.inputEl.value.trim();console.log(l),localStorage.setItem("input",l),localStorage.getItem("input"),""===l?(e.inputEl.placeholder="[error]",console.error("[error]")):(async function(o){const l=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:`Basic ${a}`,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"}),r=(await l.json()).access_token;try{const a=await fetch(`https://api.spotify.com/v1/search?type=track&q=${o}&limit=15`,{headers:{Authorization:`Bearer ${r}`}}),l=await a.json();console.log(l);let i=e.listEl;i.innerHTML="",l.tracks.items.forEach((e=>{const a=document.createElement("li"),o=document.createElement("span"),l=document.createElement("img"),r=document.createElement("a");o.classList.add("main__span"),a.classList.add("main__item"),l.classList.add("main__img"),r.classList.add("main__link");const s=n,c=JSON.stringify({name:e.name,artist:e.artists[0].name,url:e.external_urls.spotify});JSON.stringify(localStorage.setItem(s,c)),n++,JSON.parse(localStorage.getItem(n)),l.onload=()=>{t.includes(e.name)&&(a.style.backgroundColor="#fff",l.style.opacity="0",r.style.opacity="1",r.textContent="DMCA",r.style.color="red",r.style.fontSize="24px",r.style.padding="30px",r.style.fontWeight="500")},l.src=e.album.images[1].url,l.alt=e.album.name,r.href=e.external_urls.spotify,r.target="_blank",r.rel="noopener noreferrer nofollow",r.textContent=`${e.name} - ${e.artists[0].name}`,o.textContent="click",i.appendChild(a),r.appendChild(o),a.appendChild(l),a.appendChild(r)})),15===n&&localStorage.clear(),n=1}catch(e){console.error(e)}}(l),e.inputEl.placeholder="Type to search..."),e.formEl.reset()})),e.loginBtn.addEventListener("click",(()=>{window.open("/auth/twitch")}))}();