!function(){"use strict";var e={formEl:document.querySelector(".nav-form__post"),inputEl:document.querySelector(".nav-form__input"),loginBtn:document.querySelector(".nav-auth__link"),listEl:document.querySelector(".main__list")};const t=process.env.SPOTIFY_ID,n=process.env.SPOTIFY_SECRET,a=btoa(`${t}:${n}`);console.clear(),e.formEl.addEventListener("submit",(t=>{t.preventDefault(),async function(t){const n=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:`Basic ${a}`,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"}),o=(await n.json()).access_token;try{const n=await fetch(`https://api.spotify.com/v1/search?type=track&q=${t}`,{headers:{Authorization:`Bearer ${o}`}}),a=await n.json(),r=e.listEl;r.innerHTML="",a.tracks.items.forEach((e=>{const t=document.createElement("li"),n=document.createElement("img"),a=document.createElement("a");n.src=e.album.images[2].url,n.alt=e.album.name,a.href=e.external_urls.spotify,a.innerText=`${e.name} by ${e.artists[0].name}`,t.appendChild(n),t.appendChild(a),r.appendChild(t)}))}catch(e){console.error(e)}}(e.inputEl.value.trim()),e.formEl.reset()})),e.loginBtn.addEventListener("click",(()=>{window.open("/auth/twitch")}))}();